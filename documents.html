<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Documents Viewer | OpenClaw</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="brand">ğŸ§­ OpenClaw Control</div>
      <nav>
        <a href="./index.html">Home</a>
        <a href="./about.html">About</a>
        <a href="./task-tracker.html">Task Tracker</a>
        <a href="./calendar.html">Calendar</a>
        <a href="./documents.html" class="active">Documents</a>
      </nav>
    </header>

    <main class="container grid">
      <section class="card">
        <h1>Documents Viewer</h1>
        <p class="muted">openclaw-md ë¬¸ì„œ ì¡°íšŒ/í¸ì§‘ ì´ˆì•ˆ (ë¸Œë¼ìš°ì € ë¡œì»¬ ì €ì¥)</p>
        <select id="docSelect"></select>
        <button class="btn" id="loadBtn">ë¶ˆëŸ¬ì˜¤ê¸°</button>
      </section>
      <section class="card wide">
        <h2>Editor</h2>
        <textarea id="editor" style="width:100%;min-height:420px;background:#0b1426;color:#e7edf8;border:1px solid #2e3d60;border-radius:10px;padding:12px"></textarea>
        <div class="form-row" style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn" id="saveLocal">ë¡œì»¬ ì €ì¥</button>
          <button class="btn" id="downloadBtn">íŒŒì¼ ë‹¤ìš´ë¡œë“œ</button>
        </div>
      </section>
    </main>

    <script>
      const docs=['AGENTS.md','SOUL.md','USER.md','IDENTITY.md','TOOLS.md','HEARTBEAT.md'];
      const select=document.getElementById('docSelect');
      docs.forEach(d=>{const o=document.createElement('option');o.value=d;o.textContent=d;select.appendChild(o);});
      async function loadDoc(){
        const f=select.value;
        const key='docEdit:'+f;
        const cached=localStorage.getItem(key);
        if(cached){document.getElementById('editor').value=cached; return;}
        const r=await fetch('./openclaw-md/'+f+'?_='+Date.now());
        document.getElementById('editor').value=await r.text();
      }
      document.getElementById('loadBtn').onclick=loadDoc;
      document.getElementById('saveLocal').onclick=()=>{
        const f=select.value;
        localStorage.setItem('docEdit:'+f, document.getElementById('editor').value);
        alert('ë¡œì»¬ ì €ì¥ ì™„ë£Œ');
      };
      document.getElementById('downloadBtn').onclick=()=>{
        const f=select.value;
        const blob=new Blob([document.getElementById('editor').value],{type:'text/markdown;charset=utf-8'});
        const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download=f; a.click();
        URL.revokeObjectURL(a.href);
      };
      loadDoc();
    </script>
  </body>
</html>
